<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Students Homepage - UIU HealthCare</title>

  <!-- Favicons -->
  <link href="assets/img/title.png" rel="icon">
  <link href="assets/img/apple-touch-icon.png" rel="apple-touch-icon">

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com" rel="preconnect">
  <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Raleway:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
    rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="assets/vendor/aos/aos.css" rel="stylesheet">
  <link href="assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">
  <!-- Main CSS File -->
  <link href="assets/css/main.css" rel="stylesheet">

  <style>
    .diagnosebot-nav-modal {
      position: fixed;
      top: 0;
      right: -400px;
      width: 350px;
      height: 100%;
      background: white;
      box-shadow: -3px 0 10px rgba(0, 0, 0, 0.2);
      padding: 20px;
      transition: right 0.3s ease-in-out;
      overflow-y: auto;
      z-index: 9999;
    }

    .diagnosebot-nav-modal.open {
      right: 0;
    }

    .bot-close-btn {
      background: none;
      color: black;
      border: none;
      padding: 10px 15px;
      border-radius: 5px;
      font-size: x-large;
      cursor: pointer;
      float: right;
    }

    .botInput {
      width: 100%;
      padding: 10px;
      margin: 10px 0;
      border: 1px solid #a1dba4;
      border-radius: 5px;
    }

    .botInput:hover {
      border: 3px solid #4CAF4F;
    }

    .botButtonProperty {
      background-color: #4CAF4F;
      color: white;
      border: none;
      padding: 10px 15px;
      border-radius: 5px;
      cursor: pointer;
    }

    .botButtonProperty:hover {
      background-color: #3ea73f;
    }

    .result,
    .solution {
      margin-top: 15px;
    }

    .solution {
      display: none;
      background: #f9f9f9;
      padding: 10px;
      border-left: 5px solid #4CAF4F;
    }

    .suggestions {
      border: 1px solid #ccc;
      background: white;
      max-height: 150px;
      overflow-y: auto;
      position: absolute;
      width: 90%;
      display: none;
    }

    .suggestions div {
      padding: 10px;
      cursor: pointer;
    }

    .suggestions div:hover {
      background: #a1dba4;
    }

    #botGenderInput {
      width: 100%;
      padding: 10px;
      margin: 10px 0;
      border: 1px solid #a1dba4;
      border-radius: 5px;
      background-color: white;
      color: #333;
      font-size: 14px;
      appearance: none;
      /* for consistent look across browsers */
      -webkit-appearance: none;
      -moz-appearance: none;
      background-image: url('data:image/svg+xml;charset=US-ASCII,<svg xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8"><path fill="%234CAF4F" d="M6 8L0 0h12z"/></svg>');
      background-repeat: no-repeat;
      background-position: right 10px center;
      background-size: 12px;
    }

    #botGenderInput:hover {
      border: 3px solid #4CAF4F;
    }
  </style>
</head>

<body>
  <header id="header" class="header d-flex align-items-center sticky-top">
    <div class="container-fluid container-l position-relative d-flex align-items-center justify-content-between">
      <a href="index.html" class="logo d-flex align-items-center">
        <!-- Uncomment the line below if you also wish to use an image logo -->
        <img src="assets/img/header-logo.png" alt="header-logo">
        <h1 class="sitename">UIU<span> HealthCare</span></h1>
      </a>

      <nav id="navmenu" class="navmenu">
        <ul>
          <li><a href="#hero" class="active">Home</a></li>
          <li><a href="#services">Appointments</a></li>
          <li><a href="#doctor">Doctor</a></li>
          <li><a href="#blog-n-tips">Hospitals</a></li>
          <li><a href="#about-us">Medicine & Test</a></li>
          <li><a href="#contact">Blog</a></li>
          <li><a href="#contact">About</a></li>
          <li onclick="openNav()"><img src="assets/img/diagnose-bot.png" height="40px" width="40px"
              alt="Diagnosis-tool"></li>

        </ul>
        <i class="mobile-nav-toggle d-xl-none bi bi-list"></i>
      </nav>
      <!-- Profile Dropdown -->
      <div class="profile-container">
        <div class="profile-btn" id="profileButton">
          <img src="assets/img/me.jpg" alt="User Avatar">
          <span>011221078</span>
          <i class="bi bi-caret-down-fill"></i>
        </div>
        <div class="dropdown-menu" id="profileDropdown">
          <div class="dropdown-header">
            <img src="assets/img/me.jpg" alt="User Avatar">
            <h5>Shariful Islam</h5>
            <small>ID: 011221078</small>
          </div>
          <div class="dropdown-item">
            <i class="bi bi-person"></i> My Profile
          </div>
          <div class="dropdown-item">
            <i class="bi bi-bell"></i> Notification
          </div>
          <div class="dropdown-item">
            <i class="bi bi-question-circle"></i> Help Center
          </div>
          <div class="dropdown-item">
            <i class="bi bi-gear"></i> Settings and Privacy
          </div>
          <div class="dropdown-item">
            <i class="bi bi-exclamation-triangle"></i> Report a problem
          </div>
          <a href="login-signup.html">
            <div class="logout-btn">
              <i class="bi bi-box-arrow-right"></i> Log out
            </div>
          </a>
        </div>
      </div>

    </div>
  </header>
  <main class="main">

    <div class="diagnosebot-nav-modal" id="diagnosisNav">
      <button class="bot-close-btn" onclick="closeNav()">&times;</button>
      <h2>Diagnosis Tool</h2>
      <input type="text" id="searchInput" placeholder="Enter symptom or disease (e.g., fever, cough)"
        onkeyup="showSuggestions()" class="botInput">
      <input type="number" id="ageInput" placeholder="Enter your age..." class="botInput">
      <input type="number" id="weightInput" placeholder="Enter your weight (kg)..." class="botInput">

      <select id="botGenderInput">
        <option value="">Select Gender...</option>
        <option value="male">Male</option>
        <option value="female">Female</option>
        <option value="other">Other</option>
      </select>

      <div class="suggestions" id="suggestionsBox"></div>
      <button onclick="getDiagnosis()" class="botButtonProperty">Diagnose</button>
      <div class="result" id="diagnosisResult"></div>
      <br><button id="solutionBtn" onclick="showSolution()" style="display:none;" class="botButtonProperty">First
        Aid</button><br>
      <div class="solution" id="solutionText"></div>
    </div>

    <script>
      function openNav() {
        document.getElementById("diagnosisNav").classList.add("open");
      }

      function closeNav() {
        document.getElementById("diagnosisNav").classList.remove("open");
      }

      async function getDiagnosis() {
        const symptom = document.getElementById("searchInput").value.toLowerCase().trim();
        const age = document.getElementById("ageInput").value;
        const gender = document.getElementById("botGenderInput").value;
        const weight = document.getElementById("weightInput").value;
        const resultDiv = document.getElementById("diagnosisResult");
        const solutionBtn = document.getElementById("solutionBtn");
        const solutionText = document.getElementById("solutionText");

        if (!symptom || !age || !gender || !weight) {
          resultDiv.innerHTML = "Please enter Symptom, Age, Gender, and Weight.";
          return;
        }

        try {
          const response = await fetch(`fetch_diseases.php?query=${encodeURIComponent(symptom)}&age=${age}&weight=${weight}`);
          const data = await response.json();

          if (!data || data.length === 0) {
            resultDiv.innerHTML = "No matching medical conditions found.";
            solutionBtn.style.display = "none";
            solutionText.innerHTML = "";
            return;
          }

          const disease = data[0]; // show top match
          resultDiv.innerHTML = `
      <strong>Possible Condition:</strong> ${disease.disease}<br>
      <strong>Recommended Doctor:</strong> ${disease.recommended_specialist}<br>
      <strong>Gender:</strong> ${disease.gender}<br>
      <strong>Age Range:</strong> ${disease.age} years<br>
      <strong>Weight Range:</strong> ${disease.weight} kg<br>
      <strong>Symptoms:</strong> ${disease.symptoms}
    `;

          solutionBtn.style.display = "inline-block";
          solutionBtn.setAttribute("data-firstaid", disease.first_aid_tips);
          solutionBtn.setAttribute("data-link", disease.tutorial_link);
          solutionText.innerHTML = "";

        } catch (error) {
          resultDiv.innerHTML = "Error fetching diagnosis data.";
          console.error(error);
        }
      }


      function showSolution() {
        const tips = document.getElementById("solutionBtn").getAttribute("data-firstaid");
        const link = document.getElementById("solutionBtn").getAttribute("data-link");
        const solutionText = document.getElementById("solutionText");

        solutionText.innerHTML = `
    <strong>First Aid Tips:</strong><br>${tips.replace(/\n/g, "<br>")}<br><br>
    <a href="${link}" target="_blank" class="btn btn-primary botButtonProperty">Watch Tutorial</a>
  `;
        solutionText.style.display = "block";
      }


      async function showSuggestions() {
        const input = document.getElementById("searchInput").value.trim().toLowerCase();
        const suggestionsBox = document.getElementById("suggestionsBox");

        if (input.length === 0) {
          suggestionsBox.style.display = "none";
          return;
        }

        try {
          const response = await fetch(`fetch_diseases.php?query=${encodeURIComponent(input)}`);
          const data = await response.json();

          if (!data || data.length === 0) {
            suggestionsBox.style.display = "none";
            return;
          }

          suggestionsBox.innerHTML = data.map(item => `
      <div onclick="selectSuggestion('${item.symptoms.replace(/'/g, "\\'")}')">
        <strong>${item.disease}</strong><br>
        <small>${item.symptoms}</small>
      </div>
    `).join("");

          suggestionsBox.style.display = "block";

        } catch (error) {
          console.error("Error fetching suggestions:", error);
          suggestionsBox.style.display = "none";
        }
      }

      function selectSuggestion(symptom) {
        document.getElementById("searchInput").value = symptom;
        document.getElementById("suggestionsBox").style.display = "none";
      }
    </script>
  </main>

  <footer id="footer" class="footer light-background">

    <div class="container">
      <div class="copyright text-center ">
        <p>Â© <span>Copyright</span> <strong class="px-1 sitename">UIU HealthCare</strong> <span>All Rights
            Reserved</span></p>
      </div>
      <div class="social-links d-flex justify-content-center">
        <a href=""><i class="bi bi-twitter-x"></i></a>
        <a href=""><i class="bi bi-facebook"></i></a>
        <a href=""><i class="bi bi-instagram"></i></a>
        <a href=""><i class="bi bi-linkedin"></i></a>
      </div>
      <div class="credits">
        <!-- All the links in the footer should remain intact. -->
        <!-- You can delete the links only if you've purchased the pro version. -->
        <!-- Licensing information: https://bootstrapmade.com/license/ -->
        <!-- Purchase the pro version with working PHP/AJAX contact form: [buy-url] -->
        Designed by <a href="https://github.com/Sharif2023">Shariful Islam</a>
      </div>
    </div>
  </footer>
  <script src="assets/js/student.js"></script>

</body>

</html>